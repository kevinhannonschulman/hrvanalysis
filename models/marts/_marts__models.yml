version: 2

models:
  - name: fct_hrv_consecutive
    description: Model to analyze effect of consecutive running days on heart rate variability
    columns:
      - name: year
        description: year
        tests:
          - not_null
      - name: consecutive_days
        description: number of consecutive days with a run
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 1
              max_value: 7
      - name: min_hrv_interval
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
              max_value: 150
      - name: max_hrv_interval
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
              max_value: 150
      - name: avg_hrv_interval
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
              max_value: 150
      - name: num_interval_count
        description: count of each interval group per year (e.g. 46 groups of 3 consecutive runs in 2023)
        tests:
          - not_null
  - name: fct_hrv_elevation
    description: Model to analyze effect of elevation gain during a run on heart rate variability
    columns:
      - name: year
        description: year
        tests:
          - not_null
      - name: elev_gain_range
        description: number corresponding to range of elevation gain for each run (0-100 ft = 1, 100-200 ft = 2, etc.)
        tests:
          - not_null
      - name: min_elev_hrv
        description: minimum value for daily_avg_hrv partitioned by year and elevation gain range
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
              max_value: 150
      - name: max_elev_hrv
        description: maximum value for daily_avg_hrv partitioned by year and elevation gain range
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
              max_value: 150
      - name: avg_elev_hrv
        description: average value for daily_avg_hrv partitioned by year and elevation gain range
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
              max_value: 150
      - name: num_runs_per_range
        description: count of runs in each elevation range (e.g. 100 runs in 2023 within elevation range 5)
        tests:
          - not_null
  - name: fct_hrv_mileage
    description: Model to analyze effect of weekly running mileage on heart rate variability
    columns:
      - name: year
        description: year
        tests:
          - not_null
      - name: mileage_range
        description: number corresponding to range of weekly mileage range for each run (< 10 miles = 1, 10-20 miles = 2, etc.)
        tests:
          - not_null
      - name: min_last_daily_avg_hrv
        description: last_daily_avg_hrv is the last daily_avg_hrv value within each weekly interval (start_week) with the goal of capturing the maximum effect on HRV from the strain of each week's mileage. min_last_daily_avg_hrv is the minimum value of last_daily_avg_hrv partitioned by year and mileage_range.
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
              max_value: 150
      - name: max_last_daily_avg_hrv
        description: max_last_daily_avg_hrv is the maximum value of last_daily_avg_hrv partitioned by year and mileage_range.
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
              max_value: 150
      - name: avg_last_daily_avg_hrv
        description: avg_last_daily_avg_hrv is the average value of last_daily_avg_hrv partitioned by year and mileage_range.
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
              max_value: 150
      - name: num_runs_per_range
        description: count of runs in mileage range (e.g. 152 runs in 2023 were within weeks in mileage range 4 (30-40 miles per week))
        tests:
          - not_null